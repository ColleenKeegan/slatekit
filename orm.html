<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slate Kit - ORM / Entities</title>
    <link href="themes/start/assets/css/template.css" rel="stylesheet">	
    <link rel="stylesheet" type="text/css" href="themes/start/assets/css/lang.css" media="screen">
    <link rel="stylesheet" type="text/css" href="themes/start/app/app.css" media="screen">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <div id="page">
      <header id="header" class="site-header">
        <nav id="topbar" class="site-topbar visible-lg visible-md">
          <div class="container">
            <div class="row">
              <div id="topbar_title" class="col-sm-6">Questions? Call us toll free: +1 234 4567 890</div>
              <div class="social-links col-sm-6">
                <a id="topbar_social_facebook"  href="#"><i class="fa fa-facebook"></i></a>
                <a id="topbar_social_twitter"   href="#"><i class="fa fa-twitter"></i></a>
                <a id="topbar_social_gplus"     href="#"><i class="fa fa-google-plus"></i></a>
                <a id="topbar_social_pinterest" href="#"><i class="fa fa-pinterest"></i></a>
              </div>
            </div>
          </div>
        </nav>

        <nav id="navbar" class="site-navbar navbar navbar-static-top " role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
                <span class="sr-only">Toggle navigation</span>
                <i class="fa fa-bars"></i>
              </button>
              <h1 class="navbar-brand"><i class="fa fa-power-off"></i> <a href="index.html">Slate Kit</a></h1>
            </div>
            <div class="collapse navbar-collapse" id="navbar-collapse-1">
               <ul id="navigation" class="nav navbar-nav navbar-right">
              </ul>
            </div>
          </div>
        </nav>
      </header>

      <main id="main" class="site-main">

		<footer class="site-footer">
			<div class="container">
			<div class="row">

              <aside class="widget">
                <h1 class="widget-title">ORM</h1>
                <h3>A light-weight single table object-relational mapper for cloud databases<br />
                </h3>
              </aside>

            </div>
			</div>
		</footer>
		
		<section id="features" class="section">
          <div class="container">
            <div class="">
				<div> 
					<h1>About</h1>
					<p>The Scala ORM component in Slate Kit is designed with simplicity in mind. 
						Instead of an elaborate ORM, we focus on the basic features to support single-table based mapping of objects to tables or any other underling datasource. 
						The ORM is designed in form of an "Entities" based approach ( as you will see in the docs ). The following features are supported:
					</p>
				</div>
				<br/>
				<h1>Overview</h1>
				<p>These are all the various steps/concepts in the ORM setup and usage. All the various parts of the ORM were designed to be used independently ( where applicable ) while also being able to be integrated together to support typical ORM features. </p>
				<table class="table table-bordered table-striped">
					<tr>
						<td class="col-sm-2"><strong>Step</strong></td>
						<td><strong>About</strong></td>
						<td><strong>Required?</strong></td>
						<td class="col-sm-2"><strong>Docs</strong></td>
					</tr>
					<tr> 
						<td><strong>1. Databases</strong></td>
						<td>How to register 1 or more databases</td>
						<td><strong>required</strong></td>
						<td><a href="#orm-database" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					<tr >
						<td><strong>2. Entities</strong></td>
						<td>How to declare your model and map fields to table columns</td>
						<td><strong>required</strong></td>
						<td><a href="#orm-entity" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					<tr> 
						<td><strong>3. Setup</strong></td>
						<td>How to register your entity with a database, service.</td>
						<td><strong>required</strong></td>
						<td><a href="#orm-setup" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					<tr> 
						<td><strong>4. Service</strong></td>
						<td>How to setup a service for to centralize business logic and boiler-plate operations on an entity</td>
						<td><strong>suggested</strong></td>
						<td><a href="#orm-service" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					<tr> 
						<td><strong>5. Repository</strong></td>
						<td>How to setup a repository for CRUD operations on your entity.</td>
						<td>optional</td>
						<td><a href="#orm-repository" class="more"><span class="btn btn-primary">more</span></a></td>						
					</tr>
					<tr > 
						<td><strong>6. Mappers</strong></td>
						<td>How to create or use a mapper for mapping entities to and from sql</td>
						<td>optional</td>
						<td><a href="#orm-mapper" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					<tr > 
						<td><strong>7. Models</strong></td>
						<td>How the underlying model definitions and mappings are stored.</td>
						<td>n/a</td>
						<td><a href="#orm-model" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					<tr> 
						<td><strong>8. Relations</strong></td>
						<td>Working with table relationships</td>
						<td>n/a</td>
						<td><a href="#orm-relations" class="more"><span class="btn btn-primary">more</span></a></td>
					</tr>
					
				</table>
				
				<div>
					<div> 
						<h2 id="orm-database">1. Databases</h2>
						<p>You can register your entities to use 1 database or many by simply registering your databases by name and/or shard. Then you connect a specific model/entities to a named database. This approach  allows for flexibility in supporting multiple databases. Currently, only <strong>MySql</strong> is supported.
						</p>
						<h3>Example</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>    
  <span class="k">import</span> <span class="nn">slate.common.databases.</span><span class="o">{</span><span class="nc">DbConfig</span><span class="o">,</span> <span class="nc">DbLookup</span><span class="o">,</span> <span class="nc">DbConstants</span><span class="o">}</span>

  <span class="c1">// 1. Register the default connection
</span>  <span class="nc">DbLookup</span><span class="o">.</span><span class="n">setDefault</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">,</span> <span class="s">"jdbc:mysql://localhost/mydb"</span><span class="o">,</span> <span class="s">"root"</span><span class="o">,</span> <span class="s">"123456789"</span><span class="o">)</span>

  <span class="c1">// 2. Register using conf file from use folder {user}/.slate/db.txt
</span>  <span class="c1">// NOTE: This is a more secure
</span>  <span class="nc">DbLookup</span><span class="o">.</span><span class="n">setDefault</span><span class="o">(</span> <span class="nc">DbConfig</span><span class="o">.</span><span class="n">loadFromUserFolder</span><span class="o">(</span><span class="s">".slate"</span><span class="o">,</span> <span class="s">"db.txt"</span><span class="o">)</span> <span class="o">)</span>
    
  <span class="c1">// 3. Create a new db connection string
</span>  <span class="k">new</span> <span class="nc">DbConString</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">,</span> <span class="s">"jdbc:mysql://localhost/mydb"</span><span class="o">,</span> <span class="s">"root"</span><span class="o">,</span> <span class="s">"123456789"</span><span class="o">)</span>
  
  <span class="c1">// 4. Register named connections 
</span>  <span class="nc">DbLookup</span><span class="o">.</span><span class="n">set</span><span class="o">(</span><span class="s">"user_db1"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">DbConString</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">,</span> <span class="s">"jdbc:mysql://localhost/mydb"</span><span class="o">,</span> <span class="s">"root"</span><span class="o">,</span> <span class="s">"123456789"</span><span class="o">))</span>
  <span class="nc">DbLookup</span><span class="o">.</span><span class="n">set</span><span class="o">(</span><span class="s">"user_db2"</span><span class="o">,</span> <span class="nc">DbConfig</span><span class="o">.</span><span class="n">loadFromUserFolder</span><span class="o">(</span><span class="s">".slate"</span><span class="o">,</span> <span class="s">"db.txt"</span><span class="o">)</span> <span class="o">)</span>

</code></pre>
</div>			
						
						<h3>Notes</h3>
						<div class="alert alert-info" role="alert">
							<ol>
							  <li>Support for <strong>MySql</strong></li>
							  <li>Support for <strong>multiple databases</strong></li>
							  <li>Load connection info from a config file in user directory e.g. {user}./slate <strong>( for added security )</strong></li>
							</ol>
						</div>	
						<h3>More</h3>
						<p>For more information, see the full example that is part of the examples project</p>
						<a href="mod-data.html" class="more"><span class="btn btn-primary">See full code</span></a>
					</div>
					<br/><br/>
					<div> 
						<h2 id="orm-entity">2. Entities</h2>
						<p>Each class that you want persisted and mapped to a database table/record must extend the IEntity trait.
						IEntity provides some consistent fields and behaviour to facilitate the ORM.
						</p>
						<h3>Example</h3>
						<div class="highlighter-rouge"><pre class="highlight"><code>
  <span class="k">import</span> <span class="nn">slate.entities.core._</span>

  <span class="c1">// 1. Extend from IEntity
</span>  <span class="c1">// 2. Add @Field annotations for fields that should be mapped
</span>  <span class="k">class</span> <span class="nc">User</span> <span class="k">extends</span> <span class="nc">IEntity</span>
  <span class="o">{</span>
      <span class="c1">// Primary key
</span>      <span class="k">var</span> <span class="n">id</span> <span class="k">=</span> <span class="mi">0L</span>
  
      <span class="nd">@Field</span><span class="o">(</span><span class="s">""</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="mi">50</span><span class="o">)</span>
      <span class="k">var</span> <span class="n">userName</span>  <span class="k">=</span> <span class="s">""</span>
  
      <span class="nd">@Field</span><span class="o">(</span><span class="s">""</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="mi">50</span><span class="o">)</span>
      <span class="k">var</span> <span class="n">email</span>  <span class="k">=</span> <span class="s">""</span>
  
      <span class="nd">@Field</span><span class="o">(</span><span class="s">""</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="mi">20</span><span class="o">)</span>
      <span class="k">var</span> <span class="n">password</span>  <span class="k">=</span> <span class="s">""</span>
  
      <span class="c1">// The timestamp and audit fields
</span>      <span class="nd">@Field</span><span class="o">(</span><span class="s">""</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
      <span class="k">var</span> <span class="n">createdAt</span>  <span class="k">=</span> <span class="nc">DateTime</span><span class="o">.</span><span class="n">now</span><span class="o">()</span>
  
      <span class="nd">@Field</span><span class="o">(</span><span class="s">""</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
      <span class="k">var</span> <span class="n">createdBy</span>  <span class="k">=</span> <span class="mi">0</span>
  
      <span class="nd">@Field</span><span class="o">(</span><span class="s">""</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
      <span class="k">var</span> <span class="n">updatedAt</span>  <span class="k">=</span>  <span class="nc">DateTime</span><span class="o">.</span><span class="n">now</span><span class="o">()</span>
  
      <span class="nd">@Field</span><span class="o">(</span><span class="s">""</span><span class="o">,</span> <span class="kc">true</span><span class="o">,</span> <span class="o">-</span><span class="mi">1</span><span class="o">)</span>
      <span class="k">var</span> <span class="n">updatedBy</span>  <span class="k">=</span> <span class="mi">0</span>
  <span class="o">}</span>

</code></pre>
</div>
						<h3>Fields</h3>
						<table class="table table-bordered table-striped">
							<tr>
								<td class="col-sm-2"><strong>Field</strong></td>
								<td class="col-sm-1"><strong>Type</strong></td>
								<td class="col-sm-1"><strong>Managed</strong></td>
								<td class="col-sm-1"><strong>Required</strong></td>
								<td class="col-sm-2"><strong>Trait</strong></td>
								<td><strong>Notes</strong></td>
							</tr>
							<tr>
								<td ><strong>id</strong></td>
								<td>long</td>
								<td>yes</td>
								<td>yes</td>
								<td>IEntity</td>
								<td>primary key of the table</td>
							</tr>
							<tr>
								<td ><strong>createdAt</strong></td>
								<td>DateTime</td>
								<td>yes</td>
								<td>yes</td>
								<td>IEntity</td>
								<td>Create date timestamp</td>
							</tr>
							<tr>
								<td ><strong>createdBy</strong></td>
								<td>long</td>
								<td>config</td>
								<td>yes</td>
								<td>IEntity</td>
								<td>User id who created item</td>
							</tr>
							<tr>
								<td ><strong>updatedAt</strong></td>
								<td>DateTime</td>
								<td>yes</td>
								<td>yes</td>
								<td>IEntity</td>
								<td >Update date timestamp</td>
							</tr>
							<tr>
								<td><strong>updatedBy</strong></td>
								<td>long</td>
								<td>config</td>
								<td>yes</td>
								<td>IEntity</td>
								<td>User id who updated item</td>
							</tr>
							<tr>
								<td><strong>tag</strong></td>
								<td>string</td>
								<td>no</td>
								<td>no</td>
								<td>IEntityTag</td>
								<td>useful for segmenting entities by some key</td>
							</tr>
							<tr>
								<td><strong>uniqueId</strong></td>
								<td>string</td>
								<td>yes</td>
								<td>no</td>
								<td>IEntityUnique</td>
								<td>a unique guid generated 1 time used for cross-environment uniquess and import/export.</td>
							</tr>
						</table>
						<h3>Notes</h3>
						<div class="alert alert-info" role="alert">
							<ol>
							  <li>Each entity to be used in the ORM <strong>MUST</strong> extend <strong>IEntity</strong></li>
							  <li>The primary key is a field <strong>id</strong> with type <strong>Long</strong></li>
							  <li>The entity must have annotations to tell the ORM which fields are mapped to columns</li>
							  <li>The timestamps ( <strong>createdAt</strong>, <strong>updatedAt</strong> ) are managed by the ORM.</li>
							  <li>Extending from IEntityUnique allows ORM to auto-create guid for the uniqueId field.</li>
							</ol>
						</div>						
						<h3>More</h3>
						<p>For more information, see the full example that is part of the examples project</p>
						<a href="mod-orm-service.html" class="more"><span class="btn btn-primary">See full code</span></a>
						<br/>
					</div>
					<br/><br/>				
					<div>
						<h2 id="orm-setup">3. Setup</h2>
						<p>Once you setup entities and services(optional), you simply register your components to have the ORM wire everything together.</p>
						<h3>Example</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>
<span class="k">val</span> <span class="n">entities</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Entities</span><span class="o">()</span>

<span class="c1">// Set up 1: Simple ( using default service, repo, connection ) 
</span><span class="n">entities</span><span class="o">.</span><span class="n">register</span><span class="o">[</span><span class="kt">User</span><span class="o">](</span><span class="n">isSqlRepo</span><span class="k">=</span> <span class="kc">true</span><span class="o">,</span> <span class="n">entityType</span> <span class="k">=</span> <span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">],</span> <span class="n">dbType</span> <span class="k">=</span> <span class="nc">DbConstants</span><span class="o">.</span><span class="nc">DbMySql</span><span class="o">)</span>

<span class="c1">// Set up 2: Custom service, default repo, connection 
</span><span class="n">entities</span><span class="o">.</span><span class="n">register</span><span class="o">[</span><span class="kt">User</span><span class="o">](</span><span class="n">isSqlRepo</span><span class="k">=</span> <span class="kc">true</span><span class="o">,</span> <span class="n">entityType</span> <span class="k">=</span> <span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">],</span> <span class="n">serviceType</span><span class="k">=</span> <span class="n">typeOf</span><span class="o">[</span><span class="kt">UserService</span><span class="o">],</span> <span class="n">dbType</span> <span class="k">=</span> <span class="nc">DbConstants</span><span class="o">.</span><span class="nc">DbMySql</span><span class="o">)</span>

<span class="c1">// Set up 3: Custom service, custom repo, default connection 
</span><span class="n">entities</span><span class="o">.</span><span class="n">register</span><span class="o">[</span><span class="kt">User</span><span class="o">](</span><span class="n">isSqlRepo</span><span class="k">=</span> <span class="kc">true</span><span class="o">,</span> <span class="n">entityType</span> <span class="k">=</span> <span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">],</span> <span class="n">serviceType</span><span class="k">=</span> <span class="n">typeOf</span><span class="o">[</span><span class="kt">UserService</span><span class="o">],</span> <span class="n">repository</span><span class="k">=</span> <span class="k">new</span> <span class="nc">UserRepository</span><span class="o">(</span><span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">]),</span> <span class="n">dbType</span> <span class="k">=</span> <span class="nc">DbConstants</span><span class="o">.</span><span class="nc">DbMySql</span><span class="o">)</span>

<span class="c1">// Set up 4: Custom service, repo and connection
</span><span class="n">entities</span><span class="o">.</span><span class="n">register</span><span class="o">[</span><span class="kt">User</span><span class="o">](</span><span class="n">isSqlRepo</span><span class="k">=</span> <span class="kc">true</span><span class="o">,</span> <span class="n">entityType</span> <span class="k">=</span> <span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">],</span> <span class="n">serviceType</span><span class="k">=</span> <span class="n">typeOf</span><span class="o">[</span><span class="kt">UserService</span><span class="o">],</span> <span class="n">repository</span><span class="k">=</span> <span class="k">new</span> <span class="nc">UserRepository</span><span class="o">(</span><span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">]),</span> <span class="n">dbType</span> <span class="k">=</span> <span class="nc">DbConstants</span><span class="o">.</span><span class="nc">DbMySql</span><span class="o">,</span> <span class="n">dbKey</span> <span class="k">=</span> <span class="s">"user_db"</span><span class="o">)</span>

<span class="c1">// Use case 1: Get repository
</span><span class="k">val</span> <span class="n">repo</span> <span class="k">=</span> <span class="n">entities</span><span class="o">.</span><span class="n">getRepo</span><span class="o">(</span><span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">])</span>

<span class="c1">// Use case 2: Get the service
</span><span class="k">val</span> <span class="n">svc</span> <span class="k">=</span> <span class="n">entities</span><span class="o">.</span><span class="n">getService</span><span class="o">(</span><span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">])</span>

<span class="c1">// Use case 3: Get the entity mapper
</span><span class="k">val</span> <span class="n">mapper</span> <span class="k">=</span> <span class="n">entities</span><span class="o">.</span><span class="n">getMapper</span><span class="o">(</span><span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">])</span>

</code></pre>
</div>
						
						<h3>Notes</h3>
						<div class="alert alert-info" role="alert">
							<ol>
							  <li>The simplest case is you only create an entity and use the pre-built service and repo classes.</li>
							  <li>You are free to create your own <strong>service</strong> or <strong>repository</strong> classes.</li>
							</ol>
						</div>	
						<a href="mod-orm-setup.html" class="more"><span class="btn btn-primary">See full code</span></a>
					</div>
					<br/><br/>
					<div> 
						<h2 id="orm-service">4. Service</h2>
						<p>A Service layer ( a default implementation is provided ) must be set up for each entity and provides many boiler-plate features such as CRUD, search, timestamps and auditing.
						</p>
						<h3>Example</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>
  <span class="k">import</span> <span class="nn">slate.entities.core._</span>

  <span class="c1">// PREREQUISITE: Setup the default database connection.
</span>  <span class="c1">// See database setup for more info
</span>  <span class="nc">DbLookup</span><span class="o">.</span><span class="n">setDefault</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">,</span> <span class="s">"jdbc:mysql://localhost/mydb"</span><span class="o">,</span> <span class="s">"root"</span><span class="o">,</span> <span class="s">"123456789"</span><span class="o">)</span>
  
  <span class="c1">// =====================================================
</span>  <span class="c1">// SETUP 1: Use the existing EntityService[T] class
</span>  <span class="k">val</span> <span class="n">svc1</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">EntityService</span><span class="o">[</span><span class="kt">User</span><span class="o">](</span><span class="n">getUserRepo</span><span class="o">())</span>
  
  
  <span class="c1">// =====================================================
</span>  <span class="c1">// SETUP 2: Create your own service to avoid generics
</span>  <span class="k">class</span> <span class="nc">UserService</span><span class="o">(</span><span class="n">repo</span><span class="k">:</span><span class="kt">EntityRepo</span><span class="o">[</span><span class="kt">User</span><span class="o">])</span> <span class="k">extends</span> <span class="nc">EntityService</span><span class="o">[</span><span class="kt">User</span><span class="o">](</span><span class="n">repo</span><span class="o">)</span>
  <span class="o">{</span>
  <span class="o">}</span>  
  <span class="k">var</span> <span class="n">svc</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">UserService</span><span class="o">(</span><span class="n">getUserRepo</span><span class="o">())</span>
  
  
  <span class="c1">// =====================================================
</span>  <span class="c1">// SETUP 3: This is the most convenient way to wire up all the components.
</span>  <span class="c1">// Entities is a registration system for your entities.
</span>  <span class="c1">// a) database
</span>  <span class="c1">// b) entity
</span>  <span class="c1">// c) service 
</span>  <span class="k">val</span> <span class="n">entities</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Entities</span><span class="o">()</span> 
  <span class="n">entities</span><span class="o">.</span><span class="n">register</span><span class="o">[</span><span class="kt">User</span><span class="o">](</span> <span class="n">isSqlRepo</span><span class="k">=</span> <span class="kc">true</span><span class="o">,</span> 
                           <span class="n">entityType</span> <span class="k">=</span> <span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">],</span> 
                           <span class="n">serviceType</span><span class="k">=</span> <span class="n">typeOf</span><span class="o">[</span><span class="kt">UserService</span><span class="o">],</span> 
                           <span class="n">dbType</span> <span class="k">=</span> <span class="nc">DbConstants</span><span class="o">.</span><span class="nc">DbMySql</span><span class="o">)</span>
    
  <span class="c1">// EXAMPLES: 
</span>  <span class="c1">// 1. Create 
</span>  <span class="n">svc</span><span class="o">.</span><span class="n">create</span><span class="o">(</span><span class="k">new</span> <span class="nc">User</span><span class="o">(</span><span class="s">"user"</span><span class="o">,</span> <span class="s">"04"</span><span class="o">))</span>
  
  <span class="c1">// 2. Retrieve  
</span>  <span class="k">val</span> <span class="n">item</span> <span class="k">=</span> <span class="n">svc</span><span class="o">.</span><span class="n">get</span><span class="o">(</span> <span class="mi">2</span> <span class="o">)</span>
  <span class="n">svc</span><span class="o">.</span><span class="n">getAll</span><span class="o">()</span>
  
  <span class="c1">// 3. Update
</span>  <span class="n">item</span><span class="o">.</span><span class="n">get</span><span class="o">.</span><span class="n">firstName</span> <span class="k">=</span> <span class="s">"user_two"</span>
  <span class="n">svc</span><span class="o">.</span><span class="n">update</span><span class="o">(</span><span class="n">item2</span><span class="o">.</span><span class="n">get</span><span class="o">)</span>
  
  <span class="c1">// 4. Delete
</span>  <span class="n">svc</span><span class="o">.</span><span class="n">delete</span><span class="o">(</span> <span class="mi">4</span> <span class="o">)</span>
  
  <span class="c1">// 5. Find by date
</span>  <span class="n">svc</span><span class="o">.</span><span class="n">recent</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
  <span class="n">svc</span><span class="o">.</span><span class="n">oldest</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span>
  <span class="n">svc</span><span class="o">.</span><span class="n">first</span><span class="o">()</span>
  <span class="n">svc</span><span class="o">.</span><span class="n">last</span><span class="o">()</span>
  <span class="n">svc</span><span class="o">.</span><span class="n">count</span><span class="o">()</span>
  
</code></pre>
</div>					
						<h3>Features</h3>
						<table class="table table-bordered table-striped">
							<tr>
								<td class="col-sm-1"><strong>Area</strong></td>
								<td><strong>Notes</strong></td>
								<td><strong>Currently available</strong></td>
							</tr>
							<tr>
								<td><strong>Logic</strong></td>
								<td>1. serves as the location to put any business logic/operations. All controller/apis delegate logic to a service</td>
								<td>yes</td>
							</tr>
							<tr>
								<td><strong>Crud</strong></td>
								<td>2. standardized CRUD ( create, retrieve, update, delete) methods that simply delegate to the Repo</td>
								<td>yes</td>
							</tr>
							<tr>
								<td><strong>Search</strong></td>
								<td>3. standardized Find ( first, last, recent, oldest, findBy ) methods finding / searching for items</td>
								<td>yes</td>
							</tr>
							<tr>
								<td><strong>Hooks</strong></td>
								<td>4. standardized Hooks to perform some operations before/after CRUD operations</td>
								<td><strong>coming soon</strong></td>
							</tr>
						</table>
						<h3>Notes</h3>
						<div class="alert alert-info" role="alert">
							<ol>
							  <li>The base service is <strong>EntityService[T >: Null <: IEntity]</strong></li>
							  <li>You can simply use the base service for your Entity via <strong>new EntityService[User]()</strong></li>
							  <li>You can subclass the EntityService to avoid generics <strong>class UserService extends EntityService[User]</strong></li>
							  <li>The service layer uses a <strong>EntityRepo</strong>(Repository) class/instance ( see below ) to perform the actual CRUD operations</li>
							  <li>The service layer is <strong>independent</strong> of the underlying database/repository implementation.</li>
							  <li>Use the <strong>Entities</strong> component for registering all your entities.</li>
							</ol>
						</div>
						<h3>More</h3>
						<p>For more information, see the full example that is part of the examples project</p>
						<a href="mod-orm-service.html" class="more"><span class="btn btn-primary">See full code</span></a>
					</div>
					<br/><br/>
					<div> 
						<h2 id="orm-repository">5. Repo</h2>
						<p>The Repository layer ( a default mysql implementation is provided ) must be set up to support all of the CRUD operations on your entity.						
						</p>
						<h3>Example</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>
  <span class="k">import</span> <span class="nn">slate.entities.repos._</span>

  <span class="c1">// PREREQUISITE: Setup the default database connection.
</span>  <span class="c1">// See database setup for more info
</span>  <span class="nc">DbLookup</span><span class="o">.</span><span class="n">setDefault</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">,</span> <span class="s">"jdbc:mysql://localhost/mydb"</span><span class="o">,</span> <span class="s">"root"</span><span class="o">,</span> <span class="s">"123456789"</span><span class="o">)</span>
  
  <span class="c1">// =====================================================
</span>  <span class="c1">// SETUP 1: Use existing implementation of Repo for MySql 
</span>  <span class="k">val</span> <span class="n">repoMySql</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">EntityRepoMySql</span><span class="o">[</span><span class="kt">User</span><span class="o">](</span><span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">])</span>
  
  <span class="c1">// =====================================================
</span>  <span class="c1">// SETUP 2: Create your own repository for customization
</span>  <span class="k">class</span> <span class="nc">UserRepository</span><span class="o">()</span> <span class="k">extends</span> <span class="nc">EntityRepoMySql</span><span class="o">[</span><span class="kt">User</span><span class="o">](</span><span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">])</span>
  <span class="o">{</span>
  <span class="o">}</span>
  
  <span class="c1">// =====================================================
</span>  <span class="c1">// SETUP 3: This is the most convenient way to wire up all the components.
</span>  <span class="c1">// Entities is a registration system for your entities.
</span>  <span class="c1">// a) database
</span>  <span class="c1">// b) entity
</span>  <span class="c1">// c) service 
</span>  <span class="k">val</span> <span class="n">entities</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">Entities</span><span class="o">()</span> 
  <span class="n">entities</span><span class="o">.</span><span class="n">register</span><span class="o">[</span><span class="kt">User</span><span class="o">](</span> <span class="n">isSqlRepo</span><span class="k">=</span> <span class="kc">true</span><span class="o">,</span> 
                           <span class="n">entityType</span> <span class="k">=</span> <span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">],</span> 
                           <span class="n">serviceType</span><span class="k">=</span> <span class="n">typeOf</span><span class="o">[</span><span class="kt">UserService</span><span class="o">],</span> 
                           <span class="n">repository</span><span class="k">=</span> <span class="k">new</span> <span class="nc">UserRepository</span><span class="o">(</span><span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">]),</span> 
                           <span class="n">dbType</span><span class="k">=</span> <span class="s">"mysql"</span> 
                         <span class="o">)</span>
  
  <span class="c1">// =====================================================
</span>  <span class="c1">// SETUP 4: Manual configuration of db, mapper, repo.
</span>  <span class="c1">// Create the database config 
</span>  <span class="k">val</span> <span class="n">dbConfig</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">DbConString</span><span class="o">(</span><span class="s">"com.mysql.jdbc.Driver"</span><span class="o">,</span> <span class="s">"jdbc:mysql://localhost/mydb"</span><span class="o">,</span> <span class="s">"root"</span><span class="o">,</span> <span class="s">"123456789"</span><span class="o">)</span>
  
  <span class="c1">// Create the mapper to map entity to/from SQL
</span>  <span class="k">val</span> <span class="n">mapper</span> <span class="k">=</span> <span class="k">new</span> <span class="nc">EntityMapper</span><span class="o">(</span><span class="kc">null</span><span class="o">)</span>
  <span class="n">mapper</span><span class="o">.</span><span class="n">loadSchema</span><span class="o">(</span><span class="k">new</span> <span class="nc">User</span><span class="o">(),</span> <span class="n">typeOf</span><span class="o">[</span><span class="kt">User</span><span class="o">])</span> 

  <span class="c1">// Set db and mapper on the repo  
</span>  <span class="n">repoMySql</span><span class="o">.</span><span class="n">setDb</span><span class="o">(</span><span class="n">dbConfig</span><span class="o">)</span>
  <span class="n">repoMySql</span><span class="o">.</span><span class="n">setMapper</span><span class="o">(</span><span class="n">mapper</span><span class="o">)</span>
  
</code></pre>
</div>
						
						<h3>Features</h3>
						<table class="table table-bordered table-striped">
							<tr>
								<td class="col-sm-1"><strong>Area</strong></td>
								<td><strong>Notes</strong></td>
								<td><strong>Currently available</strong></td>
							</tr>
							<tr>
								<td><strong>Crud</strong></td>
								<td>1. standardized CRUD ( create, retrieve, update, delete) methods that simply delegate to the Repo</td>
								<td>yes</td>
							</tr>
							<tr>
								<td><strong>Search</strong></td>
								<td>2. standardized Find ( first, last, recent, oldest, findBy ) methods finding / searching for items</td>
								<td>yes</td>
							</tr>
						</table>
						<h3>Notes</h3>
						<div class="alert alert-info" role="alert">
							<ol>
							  <li>The base repo is <strong>EntityRepo[T >: Null <: IEntity]</strong></li>
							  <li>You can simply use the base repo for your Entity via <strong>new EntityRepoMySql[User](typeOf[User])</strong></li>
							  <li>You can subclass the EntityRepo if you need to provide your own implementation of method(s)</li>
							  <li>The repository uses a <strong>EntityMapper</strong>(Mapper) class/instance ( see below ) to map between objects to SQL</li>
							  <li>A repository implementation exists for <strong>MySql</strong></li>
							</ol>
						</div>
						<h3>More</h3>
						<p>For more information, see the full example that is part of the examples project</p>
						<a href="mod-orm-repo.html" class="more"><span class="btn btn-primary">See full code</span></a>
					</div>
					<br/><br/>
					<div> 
						<h2 id="orm-mapper">6. Mapper</h2>
						<p>The mapper component ( a default mysql entity mapper is provided ) is used map fields in the entity to/from SQL. It is designed to be general enough to support conversion to/from other formats such as JSON. You can write your own mapper. There is a built in Mapper for MySql.
						</p>
						<table class="table table-bordered table-striped">
							<tr>
								<td class="col-sm-1"><strong>Area</strong></td>
								<td><strong>Notes</strong></td>
								<td><strong>Currently available</strong></td>
							</tr>
							<tr>
								<td><strong>ORM</strong></td>
								<td>1. Converts the entity to SQL and SQL records to an Entity</td>
								<td>yes</td>
							</tr>
							<tr>
								<td><strong>Serialization</strong></td>
								<td>2. Provides support for serializing the entity to other formats ( json )</td>
								<td>yes</td>
							</tr>
							<tr>
								<td><strong>Schema</strong></td>
								<td>3. Stores an internal <strong>Model definition</strong> (see below) that defines the fields for a entity</td>
								<td>yes</td>
							</tr>
						</table>
						<h3>Notes</h3>
						<div class="alert alert-info" role="alert">
							<ol>
							  <li>The base mapper is <strong>EntityMapper</strong></li>
							  <li>You can simply use the base mapper for your Entity via <strong>new EntityMapper(typeOf[User])</strong></li>
							  <li>You can subclass the EntityMapper if you need to provide your own implementation of method(s)</li>
							  <li>The mapper requires your entity to have annotations on it which tells it what fields to map</li>
							  <li>The mapper creates an internal Model Definition( see models below ) to store the schema of your entity for mapping purposes. </li>
							</ol>
						</div>
						<h3>More</h3>
						<p>For more information, see the full example that is part of the examples project</p>
						<a href="mod-orm-mapper.html" class="more"><span class="btn btn-primary">See full code</span></a>
					</div>
					<br/><br/>
					<div> 
						<h2 id="orm-model">7. Models</h2>
						<p>In order to use the ORM to map entities to tables, a model definition is created. A model definition is the name of the model along with the fields to be persisted. This can be done 2 different ways. Either manually ( programmatically ) or automatically ( via annotations on your entity classes ). <br/>
						<strong>Note:</strong> The examples use the annotation approach, but the docs are listed here to show how the internals work. Also, the model definition can always be queried and the code generator in Slate Kit uses the model definition to generate sql-scripts, services, apis, and javascript api proxies ( coming soon ).
						</p>
						<h3>More</h3>
						<p>For more information, see the full example that is part of the examples project</p>
						<a href="mod-orm-model.html" class="more"><span class="btn btn-primary">See full code</span></a>
					</div>	
					<br/><br/>				
					<div>
						<h2 id="orm-relations">8. Relations</h2>
						<p>
						While joins/relationships are not supported currently, you can easily get a reference to other entity Services to query related data. Part of the reason for not initially supporting joins/relationships was to get a simple ORM working well for single-table models for mostly Cloud/Mobile Backend data. The ORM will be enhanced in future versions.
						</p>
					</div>
				</div>
            </div>
          </div>
        </section>
        <section id="project_references" class="section">
			<div class="container">
				<div class="row">
					<h2>Projects</h2>
					<p>All these items are available in the following projects:</p>
					<ul>
						<li><a class="url-ch" href="overview.html#project-slate-entities">slate.entities</a></li>
					</ul>
					<p>You can view more information on projects available in SlateKit in the overview page</p>
					<a href="overview.html" class="more"><span class="btn btn-primary">See overview</span></a>
					<br/><br/>
				</div>
				<div class="row"> 
					<h2>Notes</h2>	
					<ul>
						<li>The entities ORM is model using a Model, Repository, Service approach.</li>
						<li>Mapping of fields is done by placing annotations on the model fields</li>
						<li>You only need to implement the model. You can use base Repository and Service implementions.</li>
						<li>You can create you own custom Service implementation</li>
					</ul>					
				</div>
			</div>
		</section>
      </main>

      <footer id="footer" class="site-footer">
        <div class="container">

          <div id="sidebar-footer-1">
            <div class="row">

              <aside class="widget col-md-3 col-sm-6">
                <h5 class="widget-title">About Us</h5>
                <p id="footer_aboutus">Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptate rerum voluptates. <a href="#">Read more</a></p>
              </aside>

              <aside class="widget col-md-3 col-sm-6">
                <h5 class="widget-title">Contact</h5>
                <div class="textwidget">
                  <div class="adr">
                    <div  id="footer_addr_street"  class="street-address">416 Water St.</div>
                    <span id="footer_addr_city"    class="locality">New York</span>,
                    <abbr id="footer_addr_region"  class="region" title="New York">NY</abbr>,
                    <span id="footer_addr_zip"     class="postal-code">10002</span>,
                    <span id="footer_addr_country" class="country-name">U.S.A</span>
                  </div>
                  <div>Website: <a class="url" href="http://www.codehelix.co">http://www.codehelix.co</a></div>
                </div>
              </aside>

              <aside class="widget col-md-3 col-sm-6">
                <h5 class="widget-title">Need Help?</h5>
                <p id="footer_needhelp">Temporibus autem quibusdam et aut officiis debitis aut rerum necessitatibus saepe eveniet ut et voluptate rerum voluptates. <a href="#">Read more</a></p>
              </aside>

              <aside class="widget col-md-3 col-sm-6">
                <h5 class="widget-title">Get in touch</h5>
                <div class="input-group">
                  <input type="text" class="form-control" placeholder="Your Email">
                  <span class="input-group-btn">
                    <button class="btn btn-danger" type="button"><i class="fa fa-arrow-right"></i></button>
                  </span>
                </div>
                <ul class="social-links">
                  <li><a id="footer_social_facebook" href="#"><i class="fa fa-facebook"></i></a></li>
                  <li><a id="footer_social_twitter"  href="#"><i class="fa fa-twitter"></i></a></li>
                  <li><a id="footer_social_gplus"    href="#"><i class="fa fa-google-plus"></i></a></li>
                  <li><a id="footer_social_pinterest"href="#"><i class="fa fa-pinterest"></i></a></li>
                </ul>
              </aside>

            </div>
          </div>

          <div class="copyright"><p>© 2014 Company, Inc.<br /> Theme: Start 1.2.3. Designed by <a href="http://www.yoarts.com">YoArts</a></p></div>
        </div>
      </footer>
    </div>

    <div class="scroll-to-top" data-spy="affix" data-offset-top="200"><a href="#page" class="smooth-scroll"><i class="fa fa-arrow-up"></i></a></div>
  
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script type="text/javascript" src="themes/start/assets/js/bootstrap-3.1.1.min.js"></script>
    <script type="text/javascript" src="themes/start/assets/js/jquery.isotope.min.js?v=1.5.26"></script>
    <script type="text/javascript" src="themes/start/assets/js/jquery.singlePageNav.min.js"></script>
    <script type="text/javascript" src="themes/start/assets/js/main.js"></script>
	<script type="text/javascript">
		var _codehelixAppPage = "orm";
	</script>
    <script type="text/javascript" src="themes/start/app/app.js"></script>
  </body>
</html>